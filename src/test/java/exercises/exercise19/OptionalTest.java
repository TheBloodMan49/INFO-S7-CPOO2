package exercises.exercise19;

import org.junit.jupiter.api.Test;
import org.junit.jupiter.api.BeforeEach;

import static org.junit.Assert.*;

public class OptionalTest {
	Optional<String> opt;

	@BeforeEach
	void setUp() {
		opt = Optional.of("foo");
	}

	@Test
	void ofOK() {
		assertNotNull(opt);
		assertEquals("foo", opt.orElse(""));
	}

	@Test
	void ofNull() {
		assertSame(Optional.EMPTY, Optional.of(null));
	}

	@Test
	void orElse() {
		assertEquals("bar", Optional.of(null).orElse("bar"));
	}

	@Test
	void isPresentOk() {
		assertTrue(opt.isPresent());
	}

	@Test
	void isPresentEmpty() {
		assertFalse(Optional.of(null).isPresent());
	}

	@Test
	void map() {
		final Optional<Integer> opt2 = opt.map(v -> v.length());

		assertNotNull(opt2);
		assertEquals(java.util.Optional.of(3), opt2.orElse(0));
	}

	@Test
	void mapNull() {
		final Optional<Integer> opt2 = Optional.of((String) null).map(v -> v.length());

		assertNotNull(opt2);
		assertSame(Optional.EMPTY, opt2);
		assertEquals(java.util.Optional.of(0), opt2.orElse(0));
	}
}
